<h2>Optional Step 2: Try a parent element</h2>

<%= error_messages_for :tracker %>
<% form_tag( {:controller => 'trackers', :action => 'test_xpath'}, :method => :get, :class => 'cmxform' ) do -%>


<ul>
 <li><label for="uri">URI </label><%= text_field_tag 'uri', @uri, :size => 80 %></li>
 <li><label for="xpath">XPath </label><%= text_field_tag 'xpath', @xpath, :size => 80 %></li>


 <li><%= submit_tag 'Refresh preview' %></li>
</ul>
<% end -%>

<%- if @elem %>
<h2>Exact piece</h2>
<a href='<%=  url_for(:action => 'new', :tracker => {:uri => @uri, :xpath => @xpath})  %>'>Create tracker</a> <span>for <%= @elem.xpath %></span>

<pre>
<%= h Piece.tidy_text(@elem.inner_text) %>
</pre>

<h2>Some parent pieces</h2>

<% for p in @parents %>
<li class='hitlist'> 
	<a href='<%=  url_for(:action => 'new', :tracker => {:uri => @uri, :xpath => p.xpath})  %>'>Create tracker</a> <span>for <%= p.xpath %></span>
<pre class='piece'>
<%= h Piece.tidy_text(p.inner_text) %>
</pre>


</li>

<% end %>

<% end -%>


